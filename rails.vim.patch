diff --git plugin/rails.vim plugin/rails.vim
index a3084bd..ca9cc2b 100644
--- plugin/rails.vim
+++ plugin/rails.vim
@@ -39,18 +36,38 @@ map <leader>gR :call ShowRoutes()<cr>
 " ------------------------------------------------------------------------------------------------------
 " Run the tests
 " ------------------------------------------------------------------------------------------------------
+function! RunTests(filename)
+    " Write the file and run tests for the given filename
+    :w
+    :silent !echo;echo;echo;echo;echo
+    exec ":!bundle exec rspec " . a:filename
+endfunction
+
+function! SetTestFile()
+    " Set the spec file that tests will be run for.
+    let t:grb_test_file=@%
+endfunction
+
 function! RunTestFile(...)
+    if a:0
+        let command_suffix = a:1
+    else
+        let command_suffix = ""
+    endif
+
     " Run the tests for the previously-marked file.
     let in_spec_file = match(expand("%"), '_spec.rb$') != -1
     if in_spec_file
-        call SweetVimRspecRun("File")
-    else
-        call SweetVimRspecRun("Previous")
+        call SetTestFile()
+    elseif !exists("t:grb_test_file")
+        return
     end
+    call RunTests(t:grb_test_file . command_suffix)
 endfunction
 
 function! RunNearestTest()
-  call SweetVimRspecRun("Focused")
+    let spec_line_number = line('.')
+    call RunTestFile(":" . spec_line_number)
 endfunction
 
 " Run this file
@@ -58,4 +75,4 @@ map <leader>t :call RunTestFile()<cr>
 " Run only the example under the cursor
 map <leader>T :call RunNearestTest()<cr>
 " Run all test files
-""map <leader>a :call RunTests('spec')<cr>
+map <leader>a :call RunTests('spec')<cr>
